########################
# Starter part LEVEL 1 #
########################
$->ACCept
$->ACTivate
$->ASsign
$->BAckup
$->DEFine
$->DELete
$->Help!
$->Query
$->REMove
$->SHow

# Own commands:
$ -> Exit
# !!!QUIt, Query collision problem!!!
$ -> QUIt
$ -> BYe
$ -> Logout
$ -> REload
$ -> RULer
$ -> deb
$ -> ver

$ -> grep
$ -> invgrep
$ -> count
$ -> mailto
$ -> SPadmin
$ -> PRint

################################
# and the rest LEVEL 2, 3, ... #
################################

SPadmin -> UPDate
SPadmin -> VERsion

SPadmin      -> SHow
SPadmin SHow -> CONFig
SPadmin SHow -> ENVinronment
SPadmin SHow -> PROCessinfo

SPadmin     -> SET
SPadmin SET -> DEBUG

# ACCept Date
ACCept -> Date

# ACTivate POlicyset domain_name policy_set_name
ACTivate               -> POlicyset
ACTivate POlicyset     -> select domain_name from domains
ACTivate POlicyset \w+ -> select set_name from policysets where set_name != 'ACTIVE' and domain_name like upper( '-2' )

# ASsign DEFMGmtclass domain_name policy_set_name class_name
ASsign                      -> DEFMGmtclass
ASsign DEFMGmtclass         -> select domain_name from domains
ASsign DEFMGmtclass \w+     -> select set_name from policysets where set_name != 'ACTIVE' and domain_name like upper( '-2' )

# lehet itt két opció kezelését is bele kellene venni a buliba?!
ASsign DEFMGmtclass \w+ \w+ -> select class_name from mgmtclasses where domain_name = upper( '-3' )

###################
# BAckup commands #
###################
# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-backup-db-back-up-database
# 2
BAckup                 -> DB

# 3
BAckup DB              -> DEVclass=
BAckup DB              -> Type=
BAckup DB              -> VOLumenames=
BAckup DB              -> NUMStreams=
BAckup DB              -> Scratch=
BAckup DB              -> Wait=
BAckup DB              -> DEDUPDEVice=
BAckup DB              -> ENCRypt=
BAckup DB              -> COMPress=
BAckup DB              -> PROTECTKeys=
BAckup DB              -> PASSword=

# +3
BAckup DB DEVclass=    -> select concat( '%PREFIX%', devclass_name ) from devclasses {Prefix: -1}
BAckup DB Type=        -> Type=Incremental
BAckup DB Type=        -> Type=Full
BAckup DB Type=        -> Type=DBSnapshot
BAckup DB Scratch=     -> Scratch=Yes
BAckup DB Scratch=     -> Scratch=No
BAckup DB Wait=        -> Wait=Yes
BAckup DB Wait=        -> Wait=No
BAckup DB DEDUPDEVice= -> DEDUPDEVice=Yes
BAckup DB DEDUPDEVice= -> DEDUPDEVice=No
BAckup DB ENCRypt=     -> ENCRypt=Yes
BAckup DB ENCRypt=     -> ENCRypt=No
BAckup DB COMPress=    -> COMPress=Yes
BAckup DB COMPress=    -> COMPress=No
BAckup DB PROTECTKeys= -> PROTECTKeys=Yes
BAckup DB PROTECTKeys= -> PROTECTKeys=No

# 4
BAckup DB (\w+=.*){1,} -> DEVclass=
BAckup DB (\w+=.*){1,} -> Type=
BAckup DB (\w+=.*){1,} -> VOLumenames=
BAckup DB (\w+=.*){1,} -> NUMStreams=
BAckup DB (\w+=.*){1,} -> Scratch=
BAckup DB (\w+=.*){1,} -> Wait=
BAckup DB (\w+=.*){1,} -> DEDUPDEVice=
BAckup DB (\w+=.*){1,} -> ENCRypt=
BAckup DB (\w+=.*){1,} -> COMPress=
BAckup DB (\w+=.*){1,} -> PROTECTKeys=
BAckup DB (\w+=.*){1,} -> PASSword=

# +4
BAckup DB (\w+=.*){1,} DEVclass=    -> select concat( '%PREFIX%', devclass_name ) from devclasses {Prefix: -1}
BAckup DB (\w+=.*){1,} Type=        -> Type=Incremental
BAckup DB (\w+=.*){1,} Type=        -> Type=Full
BAckup DB (\w+=.*){1,} Type=        -> Type=DBSnapshot
BAckup DB (\w+=.*){1,} Scratch=     -> Scratch=Yes
BAckup DB (\w+=.*){1,} Scratch=     -> Scratch=No
BAckup DB (\w+=.*){1,} Wait=        -> Wait=Yes
BAckup DB (\w+=.*){1,} Wait=        -> Wait=No
BAckup DB (\w+=.*){1,} DEDUPDEVice= -> DEDUPDEVice=Yes
BAckup DB (\w+=.*){1,} DEDUPDEVice= -> DEDUPDEVice=No
BAckup DB (\w+=.*){1,} ENCRypt=     -> ENCRypt=Yes
BAckup DB (\w+=.*){1,} ENCRypt=     -> ENCRypt=No
BAckup DB (\w+=.*){1,} COMPress=    -> COMPress=Yes
BAckup DB (\w+=.*){1,} COMPress=    -> COMPress=No
BAckup DB (\w+=.*){1,} PROTECTKeys= -> PROTECTKeys=Yes
BAckup DB (\w+=.*){1,} PROTECTKeys= -> PROTECTKeys=No

BAckup           -> DEVCONFig
BAckup DEVCONFig -> Filenames=

BAckup             -> VOLHistory
BAckup VOLHistory  -> Filenames=

###################
# DEFine commands #
###################
DEFine                     -> ASSOCiation
DEFine ASSOCiation         -> select domain_name from domains
DEFine ASSOCiation \w+     -> select schedule_name from client_schedules where domain_name like upper( '-2' )
DEFine ASSOCiation \w+ \w+ -> select node_name from nodes where domain_name like upper( '-3' )

# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-define-devclass-define-device-class
# DEFine DEVclass device_class_name LIBRary=library_name DEVType=3590
DEFine                                        -> DEVclass
DEFine DEVclass                               -> <GIVE_a_valid_device_class_name>
DEFine DEVclass \w+                         -> DEVType=
DEFine DEVclass \w+ DEVType=                -> DEVType=3590
DEFine DEVclass \w+ DEVType=                -> DEVType=LTO
DEFine DEVclass \w+                         -> LIBRary=
DEFine DEVclass \w+ LIBRary=                -> select concat( '%PREFIX%', library_name ) from libraries {Prefix: -1}
#DEFine DEVclass \w+                         -> LBProtect={Mustexist: DEVType=LTO}
#DEFine DEVclass \w+ LBProtect=              -> LBProtect=READWrite{Mustexist: DEVType=LTO} 
#DEFine DEVclass \w+ LBProtect=              -> LBProtect=WRITEOnly{Mustexist: DEVType=LTO}
#DEFine DEVclass \w+ LBProtect=              -> LBProtect=No{Mustexist: DEVType=LTO}

DEFine DEVclass \w+ (\w+=.*){1,}            -> DEVType=
DEFine DEVclass \w+ (\w+=.*){1,} DEVType=   -> DEVType=3590
DEFine DEVclass \w+ (\w+=.*){1,} DEVType=   -> DEVType=LTO
DEFine DEVclass \w+ (\w+=.*){1,}            -> LIBRary=
DEFine DEVclass \w+ (\w+=.*){1,} LIBRary=   -> select concat( '%PREFIX%', library_name ) from libraries {Prefix: -1}
DEFine DEVclass \w+ (\w+=.*){1,}            -> LBProtect={Mustexist: DEVType=LTO}
DEFine DEVclass \w+ (\w+=.*){1,} LBProtect= -> LBProtect=READWrite{Mustexist: DEVType=LTO} 
DEFine DEVclass \w+ (\w+=.*){1,} LBProtect= -> LBProtect=WRITEOnly{Mustexist: DEVType=LTO}
DEFine DEVclass \w+ (\w+=.*){1,} LBProtect= -> LBProtect=No{Mustexist: DEVType=LTO}
##################
# DELete commands #
###################
DELete -> STGpool

##################
# Query commands #
##################
# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-query-actlog-query-activity-log
Query                         -> ACtlog
     
Query ACtlog                  -> BEGINDate=
Query ACtlog                  -> BEGINTime=
Query ACtlog                  -> ENDDate=
Query ACtlog                  -> ENDTime=
Query ACtlog                  -> Search=
Query ACtlog                  -> MSGno=
Query ACtlog                  -> NODEname=
Query ACtlog                  -> JOB=
Query ACtlog                  -> ORiginator=

# !!!!!! ?????
#Query ACtlog ORiginator=(?!.*\w+\s)      -> ORiginator=ALL
#Query ACtlog ORiginator=(?!.*\w+\s)      -> ORiginator=SErver
#Query ACtlog ORiginator=(?!.*\w+\s)      -> ORiginator=CLient
#Query ACtlog ORiginator=      -> ORiginator=ALL
#Query ACtlog ORiginator=      -> ORiginator=SErver
#Query ACtlog ORiginator=      -> ORiginator=CLient

Query ACtlog ORiginator=      -> ORiginator=ALL
Query ACtlog ORiginator=      -> ORiginator=SErver
Query ACtlog ORiginator=      -> ORiginator=CLient

Query ACtlog (\w+=.*){1,} -> BEGINDate=
Query ACtlog (\w+=.*){1,} -> BEGINTime=
Query ACtlog (\w+=.*){1,} -> ENDDate=
Query ACtlog (\w+=.*){1,} -> ENDTime=
Query ACtlog (\w+=.*){1,} -> Search=
Query ACtlog (\w+=.*){1,} -> MSGno=
Query ACtlog (\w+=.*){1,} -> NODEname=
Query ACtlog (\w+=.*){1,} -> JOB=
Query ACtlog (\w+=.*){1,} -> ORiginator=
Query ACtlog (\w+=.*){1,} ORiginator= -> ORiginator=ALL
Query ACtlog (\w+=.*){1,} ORiginator= -> ORiginator=SErver
Query ACtlog (\w+=.*){1,} ORiginator= -> ORiginator=Client
#
Query ACtlog (\w+=.*){1,} -> OWNERname={Mustexist: ORiginator=CLient}
Query ACtlog (\w+=.*){1,} -> SCHedname={Mustexist: ORiginator=CLient}
Query ACtlog (\w+=.*){1,} -> DOmainname={Mustexist: ORiginator=CLient}
Query ACtlog (\w+=.*){1,} -> SESsnum={Mustexist: ORiginator=CLient}

#^(Query|quer|que|qu|q)\s+(ACtlog|actlo|actl|act|ac)->(BEGINDate|begindat|begindabegind)=
#^(Query|quer|que|qu|q)\s+(ACtlog|actlo|actl|act|ac)->(BEGINTime|begintim|beginti|begint)=
#^(Query|quer|que|qu|q)\s+(ACtlog|actlo|actl|act|ac)->(ENDDate|enddat|endda|endd)=
#^(Query|quer|que|qu|q)\s+(ACtlog|actlo|actl|act|ac)->(ENDTime|endtim|endti|endt)=
#^(Query|quer|que|qu|q)\s+(ACtlog|actlo|actl|act|ac)->(Search|searc|sear|sea|se|s)=
#^(Query|quer|que|qu|q)\s+(ACtlog|actlo|actl|act|ac)->(NODEname|nodenam|nodena|noden|node)=
#^(Query|quer|que|qu|q)\s+(ACtlog|actlo|actl|act|ac)->(ORiginator|originato|originat|origina|origin|origi|orig|ori|or)=
#^(Query|quer|que|qu|q)\s+(ACtlog|actlo|actl|act|ac)->(OWNERname|ownernam|ownerna|ownern|owner)=
#^(Query|quer|que|qu|q)\s+(ACtlog|actlo|actl|act|ac)->(SCHedname|schednam|schedna|schedn|sched|sche|sch)=
#^(Query|quer|que|qu|q)\s+(ACtlog|actlo|actl|act|ac)->(DOmainname|domainnam|domainna|domainn|domain|domai|doma|dom|do)=
#^(Query|quer|que|qu|q)\s+(ACtlog|actlo|actl|act|ac)->(SESsnum|sessnu|sessn|sess|ses)=

# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-query-license-display-license-information
Query -> LICense

# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-query-node-query-nodes
Query                              -> Node
Query Node                         -> select node_name from nodes
#Query Node            -> \*

Query Node                         -> Type=
Query Node                         -> DOmain=
Query Node                         -> Format=
Query Node                         -> AUTHentication=

Query Node Type=                   -> Type=Client
Query Node Type=                   -> Type=NAS
Query Node Type=                   -> Type=Server
Query Node Type=                   -> Type=Any 
Query Node DOmain=                 -> select concat( '%PREFIX%', domain_name) from domains {Prefix: -1}
Query Node Format=                 -> Format=Standard
Query Node Format=                 -> Format=Detailed
Query Node AUTHentication=         -> AUTHentication=LOcal
Query Node AUTHentication=         -> AUTHentication=LDap

Query Node [\w\*]+                 -> Type=
Query Node [\w\*]+                 -> DOmain=
Query Node [\w\*]+                 -> Format=
Query Node [\w\*]+                 -> AUTHentication=
Query Node [\w\*]+ Type=           -> Type=Client
Query Node [\w\*]+ Type=           -> Type=NAS
Query Node [\w\*]+ Type=           -> Type=Server
Query Node [\w\*]+ Type=           -> Type=Any
Query Node [\w\*]+ DOmain=         -> select concat( '%PREFIX%', domain_name) from domains {Prefix: -1}
Query Node [\w\*]+ Format=         -> Format=Standard
Query Node [\w\*]+ Format=         -> Format=Detailed
Query Node [\w\*]+ AUTHentication= -> AUTHentication=LOcal
Query Node [\w\*]+ AUTHentication= -> AUTHentication=LDap

# de ez már az 5. szint
#Query Node \w+ (\w+=\w*\s+){1,} -> select concat( '%PREFIX%', domain_name) from domains {Prefix: DOmain=}
#Query Node \w+ (\w+=\w*\s+){1,} -> DOmainx=

Query         -> SEssion
Query SEssion -> select session_id from sessions
Query SEssion -> MINTIMethreshold=
Query SEssion -> MAXTHRoughput=
Query SEssion -> Format=
Query SEssion -> Type= 
Query SEssion -> CLIENTName=

Query SEssion \d+ -> MINTIMethreshold=
Query SEssion \d+ -> MAXTHRoughput=
Query SEssion \d+ -> Format=
Query SEssion \d+ -> Type= 
Query SEssion \d+ -> CLIENTName=

Query         -> STGpool
Query STGpool -> select stgpool_name from stgpools

Query -> STGPOOLDIRectory

Query     -> LOG
Query LOG -> Format=

Query         -> PRocess
Query PRocess -> select process_num from processes

##################
# REMove command #
##################
REMove          -> Node
#REMove Node     -> SYNCldapdelete

################
# SHow command #
################
SHow -> TIME

###############################################################

# DEBUG
SHow -> LOG

###############################################################
teszt->parancs