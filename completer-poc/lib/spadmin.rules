########################
# Starter part LEVEL 1 #
########################
$->ACCept
$->ACTivate
$->ASsign
$->BAckup
$->CHECKIn
$->CHECKOut
$->DEFine
$->DELete
$->Query
$->REMove
$->SHow
$->DECommission
$->DISMount
$->RECommission
$->SETOPT
#$->SET

# Own commands:
$ -> Exit
# !!!QUIt, Query collision problem!!!
$ -> QUIt
$ -> BYe
$ -> LOGOut
$ -> REload
$ -> Help!
$ -> KILL

$ -> deb
$ -> ver

$ -> grep
$ -> invgrep
$ -> count
$ -> mailto
$ -> SPadmin
$ -> PRint

################################
# and the rest LEVEL 2, 3, ... #
################################

# ACCept Date
ACCept -> Date
# =========================================================================================================================

# ACTivate POlicyset domain_name policy_set_name
ACTivate                           -> POlicyset
ACTivate POlicyset                 -> select domain_name from domains
ACTivate POlicyset [\w\*\-\.\+\&]+ -> select set_name from policysets where set_name != 'ACTIVE' and domain_name like upper( '-2' )
# =========================================================================================================================

# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-assign-defmgmtclass-assign-default-management-class
# ASsign DEFMGmtclass domain_name policy_set_name class_name
ASsign                                              -> DEFMGmtclass
ASsign DEFMGmtclass                                 -> select domain_name from domains
ASsign DEFMGmtclass [\w\*\-\.\+\&]+                 -> select set_name from policysets where set_name != 'ACTIVE' and domain_name like upper( '-2' )

# lehet itt két opció kezelését is bele kellene venni a buliba?! azaz több tokent-t is lehessen megadni
ASsign DEFMGmtclass [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+ -> select class_name from mgmtclasses where domain_name = upper( '-3' )
# =========================================================================================================================

###################
# BAckup commands #
###################
# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-backup-db-back-up-database
# 2
BAckup                 -> DB
# 3
BAckup DB              -> DEVclass=
BAckup DB              -> Type=
BAckup DB              -> VOLumenames=
BAckup DB              -> NUMStreams=
BAckup DB              -> Scratch=
BAckup DB              -> Wait=
BAckup DB              -> DEDUPDEVice=
BAckup DB              -> ENCRypt=
BAckup DB              -> COMPress=
BAckup DB              -> PROTECTKeys=
BAckup DB              -> PASSword=
# +3 (4)
BAckup DB DEVclass=    -> select concat( '%PREFIX%', devclass_name ) from devclasses {Prefix: -1}
BAckup DB Type=        -> Type=Incremental
BAckup DB Type=        -> Type=Full
BAckup DB Type=        -> Type=DBSnapshot
BAckup DB Scratch=     -> Scratch=Yes
BAckup DB Scratch=     -> Scratch=No
BAckup DB Wait=        -> Wait=Yes
BAckup DB Wait=        -> Wait=No
BAckup DB DEDUPDEVice= -> DEDUPDEVice=Yes
BAckup DB DEDUPDEVice= -> DEDUPDEVice=No
BAckup DB ENCRypt=     -> ENCRypt=Yes
BAckup DB ENCRypt=     -> ENCRypt=No
BAckup DB COMPress=    -> COMPress=Yes
BAckup DB COMPress=    -> COMPress=No
BAckup DB PROTECTKeys= -> PROTECTKeys=Yes
BAckup DB PROTECTKeys= -> PROTECTKeys=No
# 4
BAckup DB (\w+=.*){1,} -> DEVclass=
BAckup DB (\w+=.*){1,} -> Type=
BAckup DB (\w+=.*){1,} -> VOLumenames=
BAckup DB (\w+=.*){1,} -> NUMStreams=
BAckup DB (\w+=.*){1,} -> Scratch=
BAckup DB (\w+=.*){1,} -> Wait=
BAckup DB (\w+=.*){1,} -> DEDUPDEVice=
BAckup DB (\w+=.*){1,} -> ENCRypt=
BAckup DB (\w+=.*){1,} -> COMPress=
BAckup DB (\w+=.*){1,} -> PROTECTKeys=
BAckup DB (\w+=.*){1,} -> PASSword=
# +4 (5)
BAckup DB (\w+=.*){1,} DEVclass=    -> select concat( '%PREFIX%', devclass_name ) from devclasses {Prefix: -1}
BAckup DB (\w+=.*){1,} Type=        -> Type=Incremental
BAckup DB (\w+=.*){1,} Type=        -> Type=Full
BAckup DB (\w+=.*){1,} Type=        -> Type=DBSnapshot
BAckup DB (\w+=.*){1,} Scratch=     -> Scratch=Yes
BAckup DB (\w+=.*){1,} Scratch=     -> Scratch=No
BAckup DB (\w+=.*){1,} Wait=        -> Wait=Yes
BAckup DB (\w+=.*){1,} Wait=        -> Wait=No
BAckup DB (\w+=.*){1,} DEDUPDEVice= -> DEDUPDEVice=Yes
BAckup DB (\w+=.*){1,} DEDUPDEVice= -> DEDUPDEVice=No
BAckup DB (\w+=.*){1,} ENCRypt=     -> ENCRypt=Yes
BAckup DB (\w+=.*){1,} ENCRypt=     -> ENCRypt=No
BAckup DB (\w+=.*){1,} COMPress=    -> COMPress=Yes
BAckup DB (\w+=.*){1,} COMPress=    -> COMPress=No
BAckup DB (\w+=.*){1,} PROTECTKeys= -> PROTECTKeys=Yes
BAckup DB (\w+=.*){1,} PROTECTKeys= -> PROTECTKeys=No
# =========================================================================================================================

BAckup           -> DEVCONFig
BAckup DEVCONFig -> Filenames=
# =========================================================================================================================

BAckup             -> VOLHistory
BAckup VOLHistory  -> Filenames=
# =========================================================================================================================

# BAckup STGpool
# https://www.ibm.com/docs/en/tsm/7.1.8?topic=bc-backup-stgpool-back-up-primary-storage-pool-data-copy-storage-pool

BAckup                                                                    -> STGpool

BAckup STGpool                                                            -> select stgpool_name from stgpools where pooltype='PRIMARY'

BAckup STGpool [\w\-\.\+\&]+                                              -> select stgpool_name from stgpools where pooltype='COPY' 

BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+                              -> MAXPRocess=
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+                              -> Preview=
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+                              -> SHREDTONOshred=
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+                              -> Wait=

BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ MAXPRocess=                  -> MAXPRocess=<give_a_number_here>
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ Preview=                     -> Preview=No
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ Preview=                     -> Preview=Yes
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ Preview=                     -> Preview=VOLumesonly
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ SHREDTONOshred=              -> SHREDTONOshred=Yes
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ SHREDTONOshred=              -> SHREDTONOshred=No
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ Wait=                        -> Wait=Yes
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ Wait=                        -> Wait=No

BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,}                 -> MAXPRocess=
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,}                 -> Preview=
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,}                 -> SHREDTONOshred=
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,}                 -> Wait=

BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,} MAXPRocess=     -> MAXPRocess=<give_a_number_here>
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,} Preview=        -> Preview=No
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,} Preview=        -> Preview=Yes
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,} Preview=        -> Preview=VOLumesonly
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,} SHREDTONOshred= -> SHREDTONOshred=Yes
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,} SHREDTONOshred= -> SHREDTONOshred=No
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,} Wait=           -> Wait=Yes
BAckup STGpool [\w\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,} Wait=           -> Wait=No

# =========================================================================================================================
# CHECKIn LIBVolume
# https://www.ibm.com/docs/en/tsm/7.1.8?topic=commands-checkin-libvolume-check-storage-volume-into-library
CHECKIn                                                  -> LIBVolume
CHECKIn LIBVolume                                        -> select library_name from libraries
CHECKIn LIBVolume [\w\-\.\+\&]+                          -> SEARCH=
CHECKIn LIBVolume [\w\-\.\+\&]+                          -> STATus=
CHECKIn LIBVolume [\w\-\.\+\&]+                          -> OWNer=
CHECKIn LIBVolume [\w\-\.\+\&]+                          -> CHECKLabel=
CHECKIn LIBVolume [\w\-\.\+\&]+                          -> SWAP=
CHECKIn LIBVolume [\w\-\.\+\&]+                          -> WAITTime=
CHECKIn LIBVolume [\w\-\.\+\&]+                          -> CLEanings=
CHECKIn LIBVolume [\w\-\.\+\&]+                          -> VOLRange={Mustexist: SEARCH=Yes}
CHECKIn LIBVolume [\w\-\.\+\&]+                          -> VOLRange={Mustexist: SEARCH=Bulk}
CHECKIn LIBVolume [\w\-\.\+\&]+                          -> VOLList={Mustexist: SEARCH=Yes}
CHECKIn LIBVolume [\w\-\.\+\&]+                          -> VOLList={Mustexist: SEARCH=Bulk}

CHECKIn LIBVolume [\w\-\.\+\&]+ SEARCH=                  -> SEARCH=No
CHECKIn LIBVolume [\w\-\.\+\&]+ SEARCH=                  -> SEARCH=Yes
CHECKIn LIBVolume [\w\-\.\+\&]+ SEARCH=                  -> SEARCH=Bulk
CHECKIn LIBVolume [\w\-\.\+\&]+ STATus=                  -> STATus=PRIvate
CHECKIn LIBVolume [\w\-\.\+\&]+ STATus=                  -> STATus=SCRatch
CHECKIn LIBVolume [\w\-\.\+\&]+ STATus=                  -> STATus=CLEaner
CHECKIn LIBVolume [\w\-\.\+\&]+ OWNer=                   -> select concat( '%PREFIX%', server_name ) from servers {Prefix: -1}
CHECKIn LIBVolume [\w\-\.\+\&]+ CHECKLabel=              -> CHECKLabel=Yes
CHECKIn LIBVolume [\w\-\.\+\&]+ CHECKLabel=              -> CHECKLabel=No
CHECKIn LIBVolume [\w\-\.\+\&]+ CHECKLabel=              -> CHECKLabel=Barcode
CHECKIn LIBVolume [\w\-\.\+\&]+ SWAP=                    -> SWAP=Yes
CHECKIn LIBVolume [\w\-\.\+\&]+ SWAP=                    -> SWAP=No
CHECKIn LIBVolume [\w\-\.\+\&]+ WAITTime=                -> WAITTime=<give_minutes>
CHECKIn LIBVolume [\w\-\.\+\&]+ CLEanings=               -> CLEanings=<give_number>

CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,}             -> SEARCH=
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,}             -> STATus=
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,}             -> OWNer=
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,}             -> CHECKLabel=
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,}             -> SWAP=
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,}             -> WAITTime=
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,}             -> CLEanings=

CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,}             -> VOLRange={Mustexist: SEARCH=Yes}
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,}             -> VOLRange={Mustexist: SEARCH=Bulk}
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,}             -> VOLList={Mustexist: SEARCH=Yes}
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,}             -> VOLList={Mustexist: SEARCH=Bulk}

CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} SEARCH=     -> SEARCH=No
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} SEARCH=     -> SEARCH=Yes
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} SEARCH=     -> SEARCH=Bulk
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} STATus=     -> STATus=PRIvate
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} STATus=     -> STATus=SCRatch
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} STATus=     -> STATus=CLEaner
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} OWNer=      -> select concat( '%PREFIX%', server_name ) from servers {Prefix: -1}
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} CHECKLabel= -> CHECKLabel=Yes
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} CHECKLabel= -> CHECKLabel=No
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} CHECKLabel= -> CHECKLabel=Barcode
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} SWAP=       -> SWAP=Yes
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} SWAP=       -> SWAP=No
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} WAITTime=   -> WAITTime=<give_minutes>
CHECKIn LIBVolume [\w\-\.\+\&]+ (\w+=.*){1,} CLEanings=  -> CLEanings=<give_number>

###################
# DEFine commands #
###################

DEFine                                             -> ASSOCiation
DEFine ASSOCiation                                 -> select domain_name from domains
DEFine ASSOCiation [\w\*\-\.\+\&]+                 -> select schedule_name from client_schedules where domain_name like upper( '-2' )
DEFine ASSOCiation [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+ -> select node_name from nodes where domain_name like upper( '-3' )
# =========================================================================================================================

# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-define-devclass-define-device-class
# DEFine DEVclass device_class_name LIBRary=library_name DEVType=3590
DEFine                                                  -> DEVclass
DEFine DEVclass                                         -> <GIVE_a_valid_device_class_name>
DEFine DEVclass [\w\*\-\.\+\&]+                         -> DEVType=
DEFine DEVclass [\w\*\-\.\+\&]+ DEVType=                -> DEVType=3590
DEFine DEVclass [\w\*\-\.\+\&]+ DEVType=                -> DEVType=LTO
DEFine DEVclass [\w\*\-\.\+\&]+                         -> LIBRary=
DEFine DEVclass [\w\*\-\.\+\&]+ LIBRary=                -> select concat( '%PREFIX%', library_name ) from libraries {Prefix: -1}

DEFine DEVclass [\w\*\-\.\+\&]+ (\w+=.*){1,}            -> DEVType=
DEFine DEVclass [\w\*\-\.\+\&]+ (\w+=.*){1,} DEVType=   -> DEVType=3590
DEFine DEVclass [\w\*\-\.\+\&]+ (\w+=.*){1,} DEVType=   -> DEVType=LTO
DEFine DEVclass [\w\*\-\.\+\&]+ (\w+=.*){1,}            -> LIBRary=
DEFine DEVclass [\w\*\-\.\+\&]+ (\w+=.*){1,} LIBRary=   -> select concat( '%PREFIX%', library_name ) from libraries {Prefix: -1}
DEFine DEVclass [\w\*\-\.\+\&]+ (\w+=.*){1,}            -> LBProtect={Mustexist: DEVType=LTO}
DEFine DEVclass [\w\*\-\.\+\&]+ (\w+=.*){1,} LBProtect= -> LBProtect=READWrite{Mustexist: DEVType=LTO}
DEFine DEVclass [\w\*\-\.\+\&]+ (\w+=.*){1,} LBProtect= -> LBProtect=WRITEOnly{Mustexist: DEVType=LTO}
DEFine DEVclass [\w\*\-\.\+\&]+ (\w+=.*){1,} LBProtect= -> LBProtect=No{Mustexist: DEVType=LTO}
# =========================================================================================================================

###################
# DELete commands #
###################

DELete         -> STGpool
DELete STGpool -> select stgpool_name from stgpools
# =========================================================================================================================

##################
# Query commands #
##################
# https://www.ibm.com/docs/en/spectrum-protect/8.1.17?topic=commands-query-filespace-query-one-more-file-spaces#r_cmd_filespace_query
Query                                                                      -> FIlespace
Query FIlespace                                                            -> select node_name from nodes
Query FIlespace [\w\*\-\.\+\&\@]+                                          -> select filespace_name from filespaces where node_name like upper( '-2' )

Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+                        -> Format=
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+                        -> NAMEType=
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+                        -> CODEType=

Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ Format=                -> Format=Standard
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ Format=                -> Format=Detailed
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ NAMEType=              -> NAMEType=SERVER 
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ NAMEType=              -> NAMEType=UNIcode
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ NAMEType=              -> NAMEType=FSID
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ CODEType=              -> CODEType=UNIcode
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ CODEType=              -> CODEType=NONUNIcode
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ CODEType=              -> CODEType=BOTH

Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ (\w+=.*){1,}           -> Format=
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ (\w+=.*){1,}           -> NAMEType=
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ (\w+=.*){1,}           -> CODEType=
#
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ (\w+=.*){1,} Format=   -> Format=Standard
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ (\w+=.*){1,} Format=   -> Format=Detailed
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ (\w+=.*){1,} NAMEType= -> NAMEType=SERVER 
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ (\w+=.*){1,} NAMEType= -> NAMEType=UNIcode
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ (\w+=.*){1,} NAMEType= -> NAMEType=FSID
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ (\w+=.*){1,} CODEType= -> CODEType=UNIcode
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ (\w+=.*){1,} CODEType= -> CODEType=NONUNIcode
Query FIlespace [\w\*\-\.\+\&\@]+ [\w\*\-\.\/\\\$]+ (\w+=.*){1,} CODEType= -> CODEType=BOTH

# https://www.ibm.com/docs/en/tsm/7.1.1?topic=commands-query-path-display-path-definition
#2
Query                                                             -> PATH
#3
Query PATH                                                        -> select SERVER_NAME from status union (select SERVER_NAME from servers)
#4
Query PATH [\w\*\-\.\+\&]+                                        -> select LIBRARY_NAME from libraries union (select DRIVE_NAME from drives)
#5
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+                        -> SRCType=
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+                        -> DESTType=
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+                        -> Format=
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+                        -> LIBRary={Mustexist: DESTType=DRIVE}
#6
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+ SRCType=               -> SRCType=ANY
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+ SRCType=               -> SRCType=DATAMover
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+ SRCType=               -> SRCType=SERVer
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+ DESTType=              -> DESTType=ANY
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+ DESTType=              -> DESTType=DRIVE
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+ DESTType=              -> DESTType=LIBRary
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+ Format=                -> Format=Standard
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+ Format=                -> Format=Detailed
#7
Query PATH [\w\*\-\.\+\&]+ [\w\*\-\.\+\&]+ (\w+=.*){1,} LIBRary=  -> select concat( '%PREFIX%', library_name ) from libraries {Prefix: -1}

# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-query-actlog-query-activity-log
Query                         -> ACtlog
     
Query ACtlog                  -> BEGINDate=
Query ACtlog                  -> BEGINTime=
Query ACtlog                  -> ENDDate=
Query ACtlog                  -> ENDTime=
Query ACtlog                  -> Search=
Query ACtlog                  -> MSGno=
Query ACtlog                  -> NODEname=
Query ACtlog                  -> JOB=
Query ACtlog                  -> ORiginator=

# !!!!!! ?????
#Query ACtlog ORiginator=(?!.*\w+\s)      -> ORiginator=ALL
#Query ACtlog ORiginator=(?!.*\w+\s)      -> ORiginator=SErver
#Query ACtlog ORiginator=(?!.*\w+\s)      -> ORiginator=CLient
#Query ACtlog ORiginator=      -> ORiginator=ALL
#Query ACtlog ORiginator=      -> ORiginator=SErver
#Query ACtlog ORiginator=      -> ORiginator=CLient

Query ACtlog ORiginator=      -> ORiginator=ALL
Query ACtlog ORiginator=      -> ORiginator=SErver
Query ACtlog ORiginator=      -> ORiginator=CLient

Query ACtlog (\w+=.*){1,} -> BEGINDate=
Query ACtlog (\w+=.*){1,} -> BEGINTime=
Query ACtlog (\w+=.*){1,} -> ENDDate=
Query ACtlog (\w+=.*){1,} -> ENDTime=
Query ACtlog (\w+=.*){1,} -> Search=
Query ACtlog (\w+=.*){1,} -> MSGno=
Query ACtlog (\w+=.*){1,} -> NODEname=
Query ACtlog (\w+=.*){1,} -> JOB=
Query ACtlog (\w+=.*){1,} -> ORiginator=
Query ACtlog (\w+=.*){1,} ORiginator= -> ORiginator=ALL
Query ACtlog (\w+=.*){1,} ORiginator= -> ORiginator=SErver
Query ACtlog (\w+=.*){1,} ORiginator= -> ORiginator=Client
#
Query ACtlog (\w+=.*){1,} -> OWNERname={Mustexist: ORiginator=CLient}
Query ACtlog (\w+=.*){1,} -> SCHedname={Mustexist: ORiginator=CLient}
Query ACtlog (\w+=.*){1,} -> DOmainname={Mustexist: ORiginator=CLient}
Query ACtlog (\w+=.*){1,} -> SESsnum={Mustexist: ORiginator=CLient}

Query ACtlog (\w+=.*){1,} DOmainname= -> select concat( '%PREFIX%', domain_name ) from domains {Prefix: -1}{Mustexist: ORiginator=CLient}
# =========================================================================================================================

Query ACtlog (\w+=.*) (\w+=.*){1,} -> BEGINDate=
Query ACtlog (\w+=.*) (\w+=.*){1,} -> BEGINTime=
Query ACtlog (\w+=.*) (\w+=.*){1,} -> ENDDate=
Query ACtlog (\w+=.*) (\w+=.*){1,} -> ENDTime=
Query ACtlog (\w+=.*) (\w+=.*){1,} -> Search=
Query ACtlog (\w+=.*) (\w+=.*){1,} -> MSGno=
Query ACtlog (\w+=.*) (\w+=.*){1,} -> NODEname=
Query ACtlog (\w+=.*) (\w+=.*){1,} -> JOB=
Query ACtlog (\w+=.*) (\w+=.*){1,} -> ORiginator=
Query ACtlog (\w+=.*) (\w+=.*){1,} ORiginator= -> ORiginator=ALL
Query ACtlog (\w+=.*) (\w+=.*){1,} ORiginator= -> ORiginator=SErver
Query ACtlog (\w+=.*) (\w+=.*){1,} ORiginator= -> ORiginator=Client
#
Query ACtlog (\w+=.*) (\w+=.*){1,} -> OWNERname={Mustexist: ORiginator=CLient}
Query ACtlog (\w+=.*) (\w+=.*){1,} -> SCHedname={Mustexist: ORiginator=CLient}
Query ACtlog (\w+=.*) (\w+=.*){1,} -> DOmainname={Mustexist: ORiginator=CLient}
Query ACtlog (\w+=.*) (\w+=.*){1,} -> SESsnum={Mustexist: ORiginator=CLient}
# 
Query ACtlog (\w+=.*) (\w+=.*){1,} DOmainname= -> select concat( '%PREFIX%', domain_name ) from domains {Prefix: -1}{Mustexist: ORiginator=CLient}

# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-query-license-display-license-information
Query -> LICense
# =========================================================================================================================

# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-query-node-query-nodes
Query                              -> Node
Query Node                         -> select node_name from nodes
#Query Node            -> \*

Query Node                         -> Type=
Query Node                         -> DOmain=
Query Node                         -> Format=
Query Node                         -> AUTHentication=

Query Node Type=                   -> Type=Client
Query Node Type=                   -> Type=NAS
Query Node Type=                   -> Type=Server
Query Node Type=                   -> Type=Any 
Query Node Type=                   -> Type=OBJECTClient
Query Node Type=                   -> Type=OSSMClient
Query Node DOmain=                 -> select concat( '%PREFIX%', domain_name) from domains {Prefix: -1}
Query Node Format=                 -> Format=Standard
Query Node Format=                 -> Format=Detailed
Query Node AUTHentication=         -> AUTHentication=LOcal
Query Node AUTHentication=         -> AUTHentication=LDap

Query Node [\w\*\-\.\+\&\@]+                 -> Type=
Query Node [\w\*\-\.\+\&\@]+                 -> DOmain=
Query Node [\w\*\-\.\+\&\@]+                 -> Format=
Query Node [\w\*\-\.\+\&\@]+                 -> AUTHentication=
Query Node [\w\*\-\.\+\&\@]+ Type=           -> Type=Client
Query Node [\w\*\-\.\+\&\@]+ Type=           -> Type=NAS
Query Node [\w\*\-\.\+\&\@]+ Type=           -> Type=Server
Query Node [\w\*\-\.\+\&\@]+ Type=           -> Type=Any
Query Node [\w\*\-\.\+\&\@]+ Type=           -> Type=OBJECTClient
Query Node [\w\*\-\.\+\&\@]+ Type=           -> Type=OSSMClient
Query Node [\w\*\-\.\+\&\@]+ DOmain=         -> select concat( '%PREFIX%', domain_name) from domains {Prefix: -1}
Query Node [\w\*\-\.\+\&\@]+ Format=         -> Format=Standard
Query Node [\w\*\-\.\+\&\@]+ Format=         -> Format=Detailed
Query Node [\w\*\-\.\+\&\@]+ AUTHentication= -> AUTHentication=LOcal
Query Node [\w\*\-\.\+\&\@]+ AUTHentication= -> AUTHentication=LDap

Query Node (\w+=\w*\s*){1,} Type= -> Type=Client
Query Node (\w+=\w*\s*){1,} Type= -> Type=NAS
Query Node (\w+=\w*\s*){1,} Type= -> Type=Server
Query Node (\w+=\w*\s*){1,} Type= -> Type=Any
Query Node (\w+=\w*\s*){1,} Type= -> Type=OBJECTClient
Query Node (\w+=\w*\s*){1,} Type= -> Type=OSSMClient
Query Node (\w+=\w*\s*){1,} DOmain= -> select concat( '%PREFIX%', domain_name) from domains {Prefix: -1}
Query Node (\w+=\w*\s*){1,} Format= -> Format=Standard
Query Node (\w+=\w*\s*){1,} Format= -> Format=Detailed
Query Node (\w+=\w*\s*){1,} AUTHentication= -> AUTHentication=LOcal
Query Node (\w+=\w*\s*){1,} AUTHentication= -> AUTHentication=LDap

Query Node [\w\*\-\.]*\s*(\w+=\w*\s*)* Type=           -> Type=Client
Query Node [\w\*\-\.]*\s*(\w+=\w*\s*)* Type=           -> Type=NAS
Query Node [\w\*\-\.]*\s*(\w+=\w*\s*)* Type=           -> Type=Server
Query Node [\w\*\-\.]*\s*(\w+=\w*\s*)* Type=           -> Type=Any
Query Node [\w\*\-\.]*\s*(\w+=\w*\s*)* Type=           -> Type=OBJECTClient
Query Node [\w\*\-\.]*\s*(\w+=\w*\s*)* Type=           -> Type=OSSMClient
Query Node [\w\*\-\.]*\s*(\w+=\w*\s*)* DOmain=         -> select concat( '%PREFIX%', domain_name) from domains {Prefix: -1}
Query Node [\w\*\-\.]*\s*(\w+=\w*\s*)* Format=         -> Format=Standard
Query Node [\w\*\-\.]*\s*(\w+=\w*\s*)* Format=         -> Format=Detailed
Query Node [\w\*\-\.]*\s*(\w+=\w*\s*)* AUTHentication= -> AUTHentication=LOcal
Query Node [\w\*\-\.]*\s*(\w+=\w*\s*)* AUTHentication= -> AUTHentication=LDap

# de ez már az 5. szint
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,}         -> Type=
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,}         -> DOmain=
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,}         -> Format=
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,}         -> AUTHentication=
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,} Type=        -> Type=Client
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,} Type=        -> Type=NAS
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,} Type=        -> Type=Server
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,} Type=        -> Type=Any
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,} Type=        -> Type=OBJECTClient
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,} Type=        -> Type=OSSMClient
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,} DOmain= -> select concat( '%PREFIX%', domain_name) from domains {Prefix: -1}
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,} Format=        -> Format=Standard
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,} Format=        -> Format=Detailed
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,} AUTHentication=        -> AUTHentication=LOcal
Query Node [\w\*\-\.\+\&\@]+ (\w+=.*){1,} AUTHentication=        -> AUTHentication=LDap

Query             -> SEssion
Query SEssion     -> select session_id from sessions
Query SEssion     -> MINTIMethreshold=
Query SEssion     -> MAXTHRoughput=
Query SEssion         -> Format=
Query SEssion Format= -> Format=Standard
Query SEssion Format= -> Format=Detailed
Query SEssion     -> Type= 

Query SEssion Type= -> Type=Admin
Query SEssion Type= -> Type=Node
Query SEssion Type= -> Type=Server
Query SEssion Type= -> Type=*

Query SEssion     -> CLIENTName=
    
Query SEssion [\d\*]+ -> MINTIMethreshold=
Query SEssion [\d\*]+ -> MAXTHRoughput=
Query SEssion [\d\*]+ -> Format=
Query SEssion [\d\*]+ Format= -> Format=Standard
Query SEssion [\d\*]+ Format= -> Format=Detailed
Query SEssion [\d\*]+ -> Type= 
Query SEssion [\d\*]+ -> CLIENTName=

Query SEssion [\d\*]+ (\w+=.*){1,} -> Format=
Query SEssion [\d\*]+ (\w+=.*){1,} Format= -> Format=Standard
Query SEssion [\d\*]+ (\w+=.*){1,} Format= -> Format=Detailed
    
Query         -> STGpool
Query STGpool -> select stgpool_name from stgpools

Query -> STGPOOLDIRectory

Query             -> LOG

Query LOG         -> Format=
Query LOG Format= -> Format=Standard
Query LOG Format= -> Format=Detailed

# https://www.ibm.com/docs/en/spectrum-protect/8.1.16?topic=commands-query-process-query-one-more-server-processes
# Query PRocess process_number DESCription=string STATus=string
# LVL 2
Query             -> PRocess
# LVL 3(4)
Query PRocess     -> select process_num from processes
Query PRocess     -> DESCription=
Query PRocess     -> STATus=
Query PRocess (\w+=.*){1,} -> DESCription=
Query PRocess (\w+=.*){1,} -> STATus=
# LVL 4(5)
Query PRocess \d+ -> DESCription=
Query PRocess \d+ -> STATus=
Query PRocess \d+ (\w+=.*){1,} -> DESCription=
Query PRocess \d+ (\w+=.*){1,} -> STATus=

Query           ->  OPTion
Query OPTion    ->  '*'

##################
# REMove command #
##################
REMove          -> Node
#REMove Node     -> SYNCldapdelete

################
# SHow command #
################
SHow -> TIME

SHow       -> SLOTS
SHow SLOTS -> select library_name from libraries

##################
# Other commands #
##################
# https://www.ibm.com/docs/en/spectrum-protect/8.1.15?topic=commands-decommission-node-decommission-application-system#r_cmd_node_decommission
DECommission                                 -> Node
DECommission Node                            -> select node_name from nodes
DECommission Node [\w\*\-\.\+\&\@]+          -> Wait=
DECommission Node [\w\*\-\.\+\&\@]+ Wait=    -> Wait=Yes
DECommission Node [\w\*\-\.\+\&\@]+ Wait=    -> Wait=No

DECommission                               -> VM
DECommission VM                            -> select distinct(VM_OWNER) from TSMGUI_ALLCLI_GRID where VM_OWNER <> ''
DECommission VM [\w\*\-\.\+\&\@]+                    -> select NAME from TSMGUI_ALLCLI_GRID where VM_OWNER=upper( '-2' )
DECommission VM [\w\*\-\.\+\&\@]+ [\w\*\-\.\+\&\@]+            -> Wait=
DECommission VM [\w\*\-\.\+\&\@]+ [\w\*\-\.\+\&\@]+            -> NAMEType=
DECommission VM [\w\*\-\.\+\&\@]+ [\w\*\-\.\+\&\@]+ NAMEType=  -> NAMEType=FSID
DECommission VM [\w\*\-\.\+\&\@]+ [\w\*\-\.\+\&\@]+ Wait=      -> Wait=Yes
DECommission VM [\w\*\-\.\+\&\@]+ [\w\*\-\.\+\&\@]+ Wait=      -> Wait=No

RECommission                    -> Node
RECommission Node               -> select node_name from nodes

RECommission                                                      -> VM
RECommission VM                                                   -> select distinct(VM_OWNER) from TSMGUI_ALLCLI_GRID where VM_OWNER <> ''
RECommission VM [\w\*\-\.\+\&\@]+                                 -> select NAME from TSMGUI_ALLCLI_GRID
RECommission VM [\w\*\-\.\+\&\@]+ [\w\*\-\.\+\&\@]+               -> NAMEType=
RECommission VM [\w\*\-\.\+\&\@]+ [\w\*\-\.\+\&\@]+ NAMEType=     -> NAMEType=FSID
###############################################################

SETOPT 		->	 3494SHARED
SETOPT 		->	 ACSACCESSID
SETOPT 		->	 ACSLOCKDRIVE
SETOPT 		->	 ACSQUICKINIT
SETOPT 		->	 ACSTIMEOUTX
SETOPT 		->	 ACTIVELOGDIRECTORY
SETOPT 		->	 ACTIVELOGSIZE
SETOPT 		->	 ADMINCOMMTIMEOUT
SETOPT 		->	 ADMINIDLETIMEOUT
SETOPT 		->	 ADMINONCLIENTPORT
SETOPT 		->	 ALIASHALT
SETOPT 		->	 ALLOWDESAUTH
SETOPT 		->	 ALLOWREORGINDEX
SETOPT 		->	 ALLOWREORGTABLE
SETOPT 		->	 ARCHFAILOVERLOGDIRECTORY
SETOPT 		->	 ARCHLOGCOMPRESS
SETOPT 		->	 ARCHLOGDIRECTORY
SETOPT 		->	 ARCHLOGUSEDTHRESHOLD
SETOPT 		->	 ASSISTVCRRECOVERY
SETOPT 		->	 AUDITSTORAGE
SETOPT 		->	 BACKUPINITIATIONROOT
SETOPT 		->	 CHECKTAPEPOS
SETOPT 		->	 CLIENTDEDUPTXNLIMIT
SETOPT 		->	 CLIENTDEPLOYCATALOGURL
SETOPT 		->	 CLIENTDEPLOYUSELOCALCATALOG
SETOPT 		->	 CLOUDRECLAMATIONDELAY
SETOPT 		->	 CLOUDREADCACHERETENTIONTIME
SETOPT 		->	 CLOUDREADCACHEMAXUSAGE
SETOPT 		->	 COMMMETHOD
SETOPT 		->	 COMMTIMEOUT
SETOPT 		->	 CONTAINERRESOURCETIMEOUT
SETOPT 		->	 DBDIAGLOGSIZE
SETOPT 		->	 DBDIAGPATHFSTHRESHOLD
SETOPT 		->	 DBMEMPERCENT
SETOPT 		->	 DBMTCPPORT
SETOPT 		->	 DEDUPREQUIRESBACKUP
SETOPT 		->	 DEDUPTIER2FILESIZE
SETOPT 		->	 DEDUPTIER3FILESIZE
SETOPT 		->	 DEVCONFIG
SETOPT 		->	 DISABLEREORGTABLE
SETOPT 		->	 DISABLESCHEDS
SETOPT 		->	 DISPLAYLFINFO
SETOPT 		->	 DNSLOOKUP
SETOPT 		->	 DRIVEACQUIRERETRY
SETOPT 		->	 ENABLENASDEDUP
SETOPT 		->	 EVENTSERVER
SETOPT 		->	 EXPINTERVAL
SETOPT 		->	 EXPQUIET
SETOPT 		->	 FASPBEGPORT
SETOPT 		->	 FASPENDPORT
SETOPT 		->	 FASPTARGETRATE
SETOPT 		->	 FFDCLOGLEVEL
SETOPT 		->	 FFDCLOGNAME
SETOPT 		->	 FFDCMAXLOGSIZE
SETOPT 		->	 FFDCNUMLOGS
SETOPT 		->	 FILEEXIT
SETOPT 		->	 FILETEXTEXIT
SETOPT 		->	 FIPSMODE
SETOPT 		->	 FSUSEDTHRESHOLD
SETOPT 		->	 IDLETIMEOUT
SETOPT 		->	 JOBRETENTION
SETOPT 		->	 KEEPALIVE
SETOPT 		->	 KEEPALIVETIME
SETOPT 		->	 KEEPALIVEINTERVAL
SETOPT 		->	 LANGUAGE
SETOPT 		->	 LDAPCACHEDURATION
SETOPT 		->	 LDAPURL
SETOPT 		->	 MAXSESSIONS
SETOPT 		->	 MESSAGEFORMAT
SETOPT 		->	 MIRRORLOGDIRECTORY
SETOPT 		->	 MOVEBATCHSIZE
SETOPT 		->	 MOVESIZETHRESH
SETOPT 		->	 MSGINTERVAL
SETOPT 		->	 NDMPCONNECTIONTIMEOUT
SETOPT 		->	 NDMPCONTROLPORT
SETOPT 		->	 NDMPENABLEKEEPALIVE
SETOPT 		->	 NDMPKEEPIDLEMINUTES
SETOPT 		->	 NDMPPORTRANGE
SETOPT 		->	 NDMPPREFDATAINTERFACE
SETOPT 		->	 NOPREEMPT
SETOPT 		->	 NORETRIEVEDATE
SETOPT 		->	 NUMOPENVOLSALLOWED
SETOPT 		->	 PREALLOCREDUCTIONRATE
SETOPT 		->	 PROTRECONCILEBATCHCOUNT
SETOPT 		->	 PUSHSTATUS
SETOPT 		->	 QUERYAUTH
SETOPT 		->	 RECLAIMDELAY
SETOPT 		->	 RECLAIMPERIOD
SETOPT 		->	 REORGBEGINTIME
SETOPT 		->	 REORGDURATION
SETOPT 		->	 REPORTRETRIEVE
SETOPT 		->	 REPLBATCHSIZE
SETOPT 		->	 REPLSIZETHRESH
SETOPT 		->	 REQSYSAUTHOUTFILE
SETOPT 		->	 RESOURCETIMEOUT
SETOPT 		->	 RESTHTTPSPORT
SETOPT 		->	 RESTOREINTERVAL
SETOPT 		->	 RETENTIONEXTENSION
SETOPT 		->	 SANDISCOVERY
SETOPT 		->	 SANDISCOVERYTIMEOUT
SETOPT 		->	 SANREFRESHTIME
SETOPT 		->	 SEARCHMPQUEUE
SETOPT 		->	 SERVERDEDUPTXNLIMIT
SETOPT 		->	 SHMPORT
SETOPT 		->	 SHREDDING
SETOPT 		->	 SSLFIPSMODE
SETOPT 		->	 SSLINITTIMEOUT
SETOPT 		->	 SSLTCPADMINPORT
SETOPT 		->	 SSLTCPPORT
SETOPT 		->	 TCPADMINPORT
SETOPT 		->	 TCPBUFSIZE
SETOPT 		->	 TCPNODELAY
SETOPT 		->	 TCPPORT
SETOPT 		->	 TCPWINDOWSIZE
SETOPT 		->	 TECBEGINEVENTLOGGING
SETOPT 		->	 TECHOST
SETOPT 		->	 TECPORT
SETOPT 		->	 TECUTF8EVENT
SETOPT 		->	 THROUGHPUTDATATHRESHOLD
SETOPT 		->	 THROUGHPUTTIMETHRESHOLD
SETOPT 		->	 TXNGROUPMAX
SETOPT 		->	 UNIQUETDPTECEVENTS
SETOPT 		->	 UNIQUETECEVENTS
SETOPT 		->	 USEREXIT
SETOPT 		->	 VERBCHECK
SETOPT 		->	 VOLUMEHISTORY

###############################################################
Set             ->  ACCounting
Set ACCounting  ->  On
Set ACCounting  ->  Off
Set                                     ->  ACTlogretention
Set ACTlogretention                     -> number
Set ACTlogretention (\d.*)              -> Mgmtstyle=
Set ACTlogretention (\d.*) Mgmtstyle=   -> Mgmtstyle=Date
Set ACTlogretention (\d.*) Mgmtstyle=   -> Mgmtstyle=Size
Set                     ->  ALERTACtiveduration
Set ALERTACtiveduration ->  number_mins
Set                     ->  ALERTCLosedduration
Set ALERTCLosedduration ->  number_mins
Set             ->  ALERTEMail
Set ALERTEMail  ->  On
Set ALERTEMail  ->  Off
Set                     ->  ALERTEMAILFRomaddr
Set ALERTEMAILFRomaddr  ->  email_address